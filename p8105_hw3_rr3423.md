p8105\_hw3\_rr3423.Rmd
================
Ragyie Rawal
10/13/2021

## PROBLEM 1

### Loading Instacart dataset from p8105.datasets

``` r
data("instacart")
```

### Cleaning variable names in Instacart datacart

``` r
instacart_df = 
  instacart %>% 
  janitor::clean_names()
```

### Dataset exploration

``` r
rows_instacart = instacart_df %>% nrow()
cols_instacart = instacart_df %>% ncol()
names_instacart = instacart_df %>% names()
```

The number of **rows** in the instacart dataset are **1384617**. The
number of **columns** in the instacart dataset are **15**. The **key
variables** in the instacart dataset are **order\_id, product\_id,
add\_to\_cart\_order, reordered, user\_id, eval\_set, order\_number,
order\_dow, order\_hour\_of\_day, days\_since\_prior\_order,
product\_name, aisle\_id, department\_id, aisle, department**.

### Aisles

How many aisles are there, and which aisles are the most items ordered
from?

``` r
instacart_df %>% 
  group_by(aisle) %>% 
  summarize(item_count = n()) %>% 
  arrange(desc(item_count))
```

    ## # A tibble: 134 × 2
    ##    aisle                         item_count
    ##    <chr>                              <int>
    ##  1 fresh vegetables                  150609
    ##  2 fresh fruits                      150473
    ##  3 packaged vegetables fruits         78493
    ##  4 yogurt                             55240
    ##  5 packaged cheese                    41699
    ##  6 water seltzer sparkling water      36617
    ##  7 milk                               32644
    ##  8 chips pretzels                     31269
    ##  9 soy lactosefree                    26240
    ## 10 bread                              23635
    ## # … with 124 more rows

There are 134 aisles in the instacart dataset. The top 3 aisles that the
most items are ordered from in descending order are: “fresh vegetables”,
“fresh fruits”, and “packaged vegetables fruits”.

### Plot of the number of items ordered in each aisle (more than 10000 items)

``` r
plot_aisle = 
  instacart_df %>% 
  group_by(aisle) %>% 
  summarize(item_count = n()) %>% 
  filter(item_count > 10000) %>% 
  ggplot(aes(x = reorder(aisle, item_count), y = item_count)) +
  geom_bar(stat = "identity") +
  coord_flip() + 
  labs(
    title = "Number of items ordered in each aisle",
    x = "Aisle name",
    y = "Items ordered",
    caption = "Limited to aisles with >10000 items"
  ) + 
  theme(axis.text.y = element_text(size = 7))

plot_aisle
```

<img src="p8105_hw3_rr3423_files/figure-gfm/aisles_plot_instacart-1.png" width="90%" />

This plot also shows that the top 3 aisles that the most items are
ordered from in descending order are: “fresh vegetables”, “fresh
fruits”, and “packaged vegetables fruits”.

### Table of three most popular items in each of the aisles “baking ingredients”, “dog food care”, “packaged vegetables fruits”

``` r
table_popular_items = 
  instacart_df %>% 
  filter(aisle %in% c("baking ingredients", "dog food care", "packaged vegetables fruits")) %>% 
  group_by(aisle, product_name) %>% 
  summarize(item_count = n()) %>% 
  filter(min_rank(desc(item_count)) < 4) %>% 
  arrange(desc(item_count), .by_group = TRUE) 
  
knitr::kable(table_popular_items)
```

| aisle                      | product\_name                                 | item\_count |
|:---------------------------|:----------------------------------------------|------------:|
| baking ingredients         | Light Brown Sugar                             |         499 |
| baking ingredients         | Pure Baking Soda                              |         387 |
| baking ingredients         | Cane Sugar                                    |         336 |
| dog food care              | Snack Sticks Chicken & Rice Recipe Dog Treats |          30 |
| dog food care              | Organix Chicken & Brown Rice Recipe           |          28 |
| dog food care              | Small Dog Biscuits                            |          26 |
| packaged vegetables fruits | Organic Baby Spinach                          |        9784 |
| packaged vegetables fruits | Organic Raspberries                           |        5546 |
| packaged vegetables fruits | Organic Blueberries                           |        4966 |
